<!DOCTYPE html>

<html lang="en">

<head>

  <meta charset="UTF-8" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>FixLens â€“ AI Diagnosis for Real-World Problems</title>

  <link rel="stylesheet" href="style.css" />

</head>

<body>

  <div class="page">



    <!-- Top Bar -->

    <header class="top-bar">

      <div class="logo-row">

        <!-- Ø¹Ø¯Ù‘Ù„ Ù…Ø³Ø§Ø± Ø§Ù„Ù„ÙˆØºÙˆ Ù‡Ù†Ø§ Ø­Ø³Ø¨ Ù…Ù„ÙÙƒ -->

        <img

          src="images/fixlens-logo.svg"

          alt="FixLens logo"

          class="logo-img"

        />

        <span class="logo-text">FixLens</span>

      </div>

      <nav class="nav">

        <a href="#how">How it works</a>

        <a href="#what">What it can fix</a>

      </nav>

    </header>



    <!-- Main Content -->

    <main class="main">



      <!-- Hero -->

      <section class="hero">

        <h1>Fix problems in the real world with AI.</h1>

        <p>

          Describe the issue or upload a photo â€” FixLens Brain analyzes engines,

          appliances, and electronics, then guides you step by step.

        </p>

      </section>



      <!-- Chat Shell -->

      <section class="chat-shell">

        <div class="chat-panel" id="chat">

          <!-- Example welcome message -->

          <div class="bubble bubble-ai">

            <div class="bubble-label">FixLens Brain</div>

            <p>

              Hi, Iâ€™m your diagnostic assistant. Describe whatâ€™s happening or

              upload a photo of the problem. You can write in English or

              Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© â€” Iâ€™ll reply in the same language.

            </p>

          </div>



          <div class="bubble bubble-user">

            <div class="bubble-label">You</div>

            <p>My car makes a squeaking noise at low speed when I brake.</p>

          </div>



          <div class="bubble bubble-ai">

            <div class="bubble-label">FixLens Brain</div>

            <p>

              This often points to worn brake pads. Iâ€™ll help you estimate risk

              level and the next steps after you share a real photo or more

              details.

            </p>

          </div>

        </div>



        <!-- Analysis strip (loader) -->

        <div class="analysis-strip" id="analysisStrip" hidden>

          <div class="spinner"></div>

          <div class="analysis-text">

            <span class="analysis-main">Analyzing your photo and descriptionâ€¦</span>

            <span class="analysis-sub" id="analysisStep">

              Checking similar real-world issuesâ€¦

            </span>

          </div>

        </div>



        <!-- Input row -->

        <div class="chat-input-row">

          <label class="upload-btn">

            <input type="file" id="photoInput" accept="image/*" />

            <span>ðŸ“· Upload photo</span>

          </label>



          <textarea

            id="userInput"

            rows="1"

            placeholder="Ø§ÙƒØªØ¨ Ù…Ø´ÙƒÙ„ØªÙƒ Ù‡Ù†Ø§ Ø£Ùˆ Ø¨Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠâ€¦"

          ></textarea>



          <button id="sendBtn">Send</button>

        </div>

      </section>



      <!-- Info sections -->

      <section class="info-grid" id="what">

        <h2>What FixLens can understand today</h2>

        <div class="info-cards">

          <article class="info-card">

            <h3>Cars & vehicles</h3>

            <p>

              Capture a photo of your dashboard, engine, leaks, or unusual wear.

              FixLens suggests likely issues before you visit a mechanic.

            </p>

          </article>



          <article class="info-card">

            <h3>Home appliances</h3>

            <p>

              Ovens, washers, fridges, AC units. Upload a photo of error codes

              or damaged parts for quick guidance.

            </p>

          </article>



          <article class="info-card">

            <h3>Electronics & tools</h3>

            <p>

              From power tools to audio gear, FixLens reads lights, textures,

              and visible damage to help you decide what to do next.

            </p>

          </article>

        </div>

      </section>



      <section class="info-steps" id="how">

        <h2>How FixLens Brain works</h2>

        <ol>

          <li>

            <strong>See what you see.</strong>

            Vision models decode your photo â€” leaks, lights, textures, and

            context.

          </li>

          <li>

            <strong>Reason like a technician.</strong>

            A reasoning layer compares patterns with thousands of known issues

            and repair paths.

          </li>

          <li>

            <strong>Guide you step by step.</strong>

            You get clear explanation, risk level, and recommended next steps â€”

            in plain language.

          </li>

        </ol>

      </section>

    </main>



    <!-- Footer -->

    <footer class="footer">

      <span>FixLens Â© 2025 FixLens.ai â€” All rights reserved.</span>

      <div class="footer-links">

        <a href="#">Privacy</a>

        <a href="#">Terms</a>

        <a href="#">Contact</a>

      </div>

    </footer>

  </div>



  <script>

    // Simple chat front-end logic

    const chatEl = document.getElementById('chat');

    const userInputEl = document.getElementById('userInput');

    const photoInputEl = document.getElementById('photoInput');

    const sendBtnEl = document.getElementById('sendBtn');

    const analysisStripEl = document.getElementById('analysisStrip');

    const analysisStepEl = document.getElementById('analysisStep');



    const analysisMessages = [

      'Checking similar real-world casesâ€¦',

      'Evaluating risk level and urgencyâ€¦',

      'Estimating likely repair pathsâ€¦',

      'Preparing a clear explanation for youâ€¦'

    ];



    let analysisTimer = null;

    let analysisIndex = 0;



    function startAnalysisAnimation() {

      analysisStripEl.hidden = false;

      analysisIndex = 0;

      analysisStepEl.textContent = analysisMessages[analysisIndex];



      if (analysisTimer) clearInterval(analysisTimer);

      analysisTimer = setInterval(() => {

        analysisIndex = (analysisIndex + 1) % analysisMessages.length;

        analysisStepEl.textContent = analysisMessages[analysisIndex];

      }, 1800);

    }



    function stopAnalysisAnimation() {

      analysisStripEl.hidden = true;

      if (analysisTimer) clearInterval(analysisTimer);

      analysisTimer = null;

    }



    function appendBubble(text, role = 'user') {

      if (!text) return;

      const bubble = document.createElement('div');

      bubble.className = 'bubble ' + (role === 'user' ? 'bubble-user' : 'bubble-ai');



      const label = document.createElement('div');

      label.className = 'bubble-label';

      label.textContent = role === 'user' ? 'You' : 'FixLens Brain';



      const p = document.createElement('p');

      p.textContent = text;



      bubble.appendChild(label);

      bubble.appendChild(p);

      chatEl.appendChild(bubble);

      chatEl.scrollTop = chatEl.scrollHeight;

    }



    async function sendMessage() {

      const text = userInputEl.value.trim();

      const file = photoInputEl.files[0];



      if (!text && !file) {

        return;

      }



      appendBubble(text || '[Photo only]', 'user');

      userInputEl.value = '';



      startAnalysisAnimation();



      try {

        const formData = new FormData();

        if (text) formData.append('description', text);

        if (file) formData.append('photo', file);



        // Ø¹Ø¯Ù‘Ù„ Ù…Ø³Ø§Ø± Ø§Ù„ API Ù‡Ù†Ø§ Ø¥Ø°Ø§ Ø§Ø­ØªØ¬Øª

        const response = await fetch('/api/fixlens', {

          method: 'POST',

          body: formData

        });



        let replyText = '';



        if (response.ok) {

          const data = await response.json();

          // Ù†ØªÙˆÙ‚Ø¹ Ø£Ù† Ø§Ù„ API ÙŠØ±Ø¬Ø¹ { answer: "..." }

          replyText = data.answer || 'I analyzed your issue and prepared some next steps for you.';

        } else {

          replyText =

            'I had trouble contacting the server. Please try again in a moment or check your connection.';

        }



        stopAnalysisAnimation();

        appendBubble(replyText, 'ai');

      } catch (err) {

        console.error(err);

        stopAnalysisAnimation();

        appendBubble(

          'Something went wrong while analyzing the problem. Please try again shortly.',

          'ai'

        );

      } finally {

        // Reset file input after send

        photoInputEl.value = '';

      }

    }



    sendBtnEl.addEventListener('click', sendMessage);



    userInputEl.addEventListener('keydown', (event) => {

      if (event.key === 'Enter' && !event.shiftKey) {

        event.preventDefault();

        sendMessage();

      }

    });

  </script>

</body>

</html>
