<!DOCTYPE html>

<html lang="en">

<head>

  <meta charset="UTF-8" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>FixLens â€“ AI Diagnosis for Real-World Problems</title>

  <link rel="stylesheet" href="style.css" />

</head>

<body>

  <div class="page">



    <!-- Top Bar -->

    <header class="top-bar">

      <div class="logo-row">

        <!-- ØºÙŠÙ‘Ø± Ù…Ø³Ø§Ø± Ø§Ù„Ù„ÙˆØºÙˆ Ø­Ø³Ø¨ Ù…Ù„ÙÙƒ -->

        <img

          src="images/fixlens-logo.svg"

          alt="FixLens logo"

          class="logo-img"

        />

        <span class="logo-text">FixLens</span>

      </div>

      <nav class="nav">

        <a href="#how">How it works</a>

      </nav>

    </header>



    <!-- Main -->

    <main class="main">

      <!-- Hero -->

      <section class="hero">

        <h1>Fix problems in the real world with AI.</h1>

        <p>

          Point your camera at the problem or describe it in your own words.

          FixLens Brain analyzes engines, appliances, and electronics, then

          guides you step by step.

        </p>

      </section>



      <!-- Chat Shell -->

      <section class="chat-shell">

        <!-- Quick actions -->

        <div class="quick-actions">

          <button class="qa-btn qa-primary" id="qaText">

            Start with text

          </button>

          <button class="qa-btn" id="qaPhoto">

            Start with photo

          </button>

          <button class="qa-btn qa-ghost" id="qaVoice" type="button">

            <span class="qa-mic-icon">ðŸŽ¤</span>

            Voice (soon)

          </button>

        </div>



        <!-- Chat panel -->

        <div class="chat-panel" id="chat">

          <div class="bubble bubble-ai">

            <div class="bubble-label">FixLens Brain</div>

            <p>

              Hi, Iâ€™m your diagnostic assistant. Describe whatâ€™s happening

              or upload a photo of the problem. You can write in any

              language â€” Iâ€™ll reply in the same one.

            </p>

          </div>

        </div>



        <!-- Analysis strip -->

        <div class="analysis-strip" id="analysisStrip" hidden>

          <div class="spinner"></div>

          <div class="analysis-text">

            <span class="analysis-main">

              Analyzing your problemâ€¦

            </span>

            <span class="analysis-sub" id="analysisStep">

              Checking similar real-world issuesâ€¦

            </span>

          </div>

        </div>



        <!-- Input row -->

        <div class="chat-input-row">

          <!-- Ù…Ù„Ù Ø§Ù„ØµÙˆØ±Ø© Ù…Ø®ÙÙŠØŒ Ù†ØªØ­ÙƒÙ… Ø¨Ù‡ Ù…Ù† Ø§Ù„Ø£Ø²Ø±Ø§Ø± -->

          <input type="file" id="photoInput" accept="image/*" hidden />



          <textarea

            id="userInput"

            rows="1"

            placeholder="Type your problem in any languageâ€¦"

          ></textarea>



          <button id="sendBtn">Send</button>

        </div>



        <!-- Small hint -->

        <p class="hint">

          FixLens can help with cars & vehicles, home appliances, and everyday electronics.

        </p>

      </section>



      <!-- How it works (short, not crowded) -->

      <section class="info-steps" id="how">

        <h2>How FixLens Brain works</h2>

        <ol>

          <li><strong>See.</strong> It interprets your text and any uploaded photo.</li>

          <li><strong>Reason.</strong> It compares patterns with thousands of real-world cases.</li>

          <li><strong>Guide.</strong> It explains likely causes and suggests safe next steps.</li>

        </ol>

      </section>

    </main>



    <!-- Footer -->

    <footer class="footer">

      <span>FixLens Â© 2025 FixLens.ai â€” All rights reserved.</span>

      <div class="footer-links">

        <a href="#">Privacy</a>

        <a href="#">Terms</a>

        <a href="#">Contact</a>

      </div>

    </footer>

  </div>



  <script>

    const chatEl = document.getElementById('chat');

    const userInputEl = document.getElementById('userInput');

    const sendBtnEl = document.getElementById('sendBtn');

    const photoInputEl = document.getElementById('photoInput');

    const analysisStripEl = document.getElementById('analysisStrip');

    const analysisStepEl = document.getElementById('analysisStep');



    const qaTextBtn = document.getElementById('qaText');

    const qaPhotoBtn = document.getElementById('qaPhoto');

    const qaVoiceBtn = document.getElementById('qaVoice');



    const analysisMessages = [

      'Checking similar real-world casesâ€¦',

      'Evaluating risk level and urgencyâ€¦',

      'Estimating likely repair pathsâ€¦',

      'Preparing a clear explanation for youâ€¦'

    ];



    let analysisTimer = null;

    let analysisIndex = 0;



    function startAnalysisAnimation() {

      analysisStripEl.hidden = false;

      analysisIndex = 0;

      analysisStepEl.textContent = analysisMessages[analysisIndex];



      if (analysisTimer) clearInterval(analysisTimer);

      analysisTimer = setInterval(() => {

        analysisIndex = (analysisIndex + 1) % analysisMessages.length;

        analysisStepEl.textContent = analysisMessages[analysisIndex];

      }, 1800);

    }



    function stopAnalysisAnimation() {

      analysisStripEl.hidden = true;

      if (analysisTimer) clearInterval(analysisTimer);

      analysisTimer = null;

    }



    function appendBubble(text, role = 'user') {

      if (!text) return;

      const bubble = document.createElement('div');

      bubble.className = 'bubble ' + (role === 'user' ? 'bubble-user' : 'bubble-ai');



      const label = document.createElement('div');

      label.className = 'bubble-label';

      label.textContent = role === 'user' ? 'You' : 'FixLens Brain';



      const p = document.createElement('p');

      p.textContent = text;



      bubble.appendChild(label);

      bubble.appendChild(p);

      chatEl.appendChild(bubble);

      chatEl.scrollTop = chatEl.scrollHeight;

    }



    async function sendMessage() {

      const text = userInputEl.value.trim();

      const file = photoInputEl.files[0];



      if (!text && !file) return;



      // Show user message

      appendBubble(text || '[Photo only]', 'user');

      userInputEl.value = '';



      startAnalysisAnimation();



      try {

        const payload = {

          description: text,

          // Ø­Ø§Ù„ÙŠØ§Ù‹ Ù†Ø±Ø³Ù„ ÙÙ‚Ø· Ù…Ø¹Ù„ÙˆÙ…Ø© Ø£Ù† Ù‡Ù†Ø§Ùƒ ØµÙˆØ±Ø©ØŒ Ø¨Ø¯ÙˆÙ† Ø±ÙØ¹Ù‡Ø§ ÙØ¹Ù„ÙŠØ§Ù‹

          hasPhoto: !!file

        };



        const response = await fetch('/api/fixlens', {

          method: 'POST',

          headers: {

            'Content-Type': 'application/json'

          },

          body: JSON.stringify(payload)

        });



        let replyText = '';



        if (response.ok) {

          const data = await response.json();

          replyText =

            data.answer ||

            'I analyzed your issue and prepared some next steps for you.';

        } else {

          replyText =

            'I had trouble contacting the server. Please try again in a moment.';

        }



        stopAnalysisAnimation();

        appendBubble(replyText, 'ai');

      } catch (err) {

        console.error(err);

        stopAnalysisAnimation();

        appendBubble(

          'Something went wrong while analyzing the problem. Please try again shortly.',

          'ai'

        );

      } finally {

        photoInputEl.value = '';

      }

    }



    // Quick actions

    qaTextBtn.addEventListener('click', () => {

      userInputEl.focus();

    });



    qaPhotoBtn.addEventListener('click', () => {

      photoInputEl.click();

    });



    qaVoiceBtn.addEventListener('click', () => {

      appendBubble(

        'Voice input is coming soon. For now, describe the issue in text and I will help you.',

        'ai'

      );

    });



    sendBtnEl.addEventListener('click', sendMessage);



    userInputEl.addEventListener('keydown', (event) => {

      if (event.key === 'Enter' && !event.shiftKey) {

        event.preventDefault();

        sendMessage();

      }

    });

  </script>

</body>

</html>
